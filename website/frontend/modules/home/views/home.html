<link rel="stylesheet" href="./modules/home/style.css" />

<!-- Error Mask -->
<div layout="row" flex="50" layout-align="center center" ng-cloak ng-show="noDataError" class="global-error-container">
<div flex>
  <div layout="column" layout-align="center center" class="alert alert-danger">
    <div>
      <strong>Error!</strong>
      There was a problem reaching our server! Please try again later.
    </div>
    <div>
      <md-button class="md-raised" ng-disabled="retryNoDataError" ng-click="retryNoData()">
        Retry
      </md-button>
    </div>
  </div>
  <div layout="row" ng-if="retryNoDataError" ng-cloak>
      <md-progress-linear class="md-warn" md-mode="indeterminate">
      </md-progress-linear>
  </div>
  </div>
</div>







<div class="global-container" ng-cloak ng-hide="noDataError">
<div layout="row" layout-align="center" class="padding-top">

      <div flex layout="row" class="layout-container">
        <div layout="row" layout-align="center" flex="33" class="champion-container" ng-repeat="champ in topChampions">
          <img ng-src="{{getImgUrl(champ.name)}}">
            <div layout="row" layout-sm="column" layout-align="space-around">
              <md-progress-circular md-diameter="150" md-mode="determinate" value="{{champ.currentAverage}}">
              </md-progress-circular>
            </div>
        </div>
      </div>

</div>

<div layout="row" layout-align="center center" class="search-container">

  <div flex layout="row" layout-align="center end" class="layout-container">
    <div layout="row" layout-align="center end" flex="50" class="champion-container">
    <md-input-container>
      <label>Champion Name</label>
      <input ng-model="search.name">
    </md-input-container>
    </div>
  </div>

</div>

<div layout="row" layout-align="center">
<div flex layout="row" class="layout-container">
  <table class="table table-inverse table-striped table-hover">
  <thead>
    <tr>
      <th colspan="4"
          class="sortable-table-header"
          href="#"
          ng-click="orderByField='rank'; reverseSort = !reverseSort"
          ng-class="{'sort-up' : !reverseSort && orderByField==='rank',
                     'sort-down' : reverseSort && orderByField==='rank',
                     'sort-active': orderByField==='rank'}">
          Rank
      </th>
      <th colspan="6"
          class="sortable-table-header"
          href="#"
          ng-click="orderByField='name'; reverseSort = !reverseSort"
          ng-class="{'sort-up' : !reverseSort && orderByField==='name',
                     'sort-down' : reverseSort && orderByField==='name',
                     'sort-active': orderByField==='name'}">
        Champion
      </th>
      <th colspan="4"
          class="sortable-table-header"
          href="#"
          ng-click="orderByField='points'; reverseSort = !reverseSort"
          ng-class="{'sort-up' : !reverseSort && orderByField==='points',
                     'sort-down' : reverseSort && orderByField==='points',
                     'sort-active': orderByField==='points'}">
        Average Points
      </th>
    </tr>
  </thead>
  <tbody class="table-listings">
    <tr ng-repeat="champ in champList | filter:search | orderBy:orderByField:reverseSort" class="selectable-row" ng-click="goto(champ.name)">
      <td colspan="4" class="relative-container">
          <div ng-class="{'arrow-up' : champ.rankChangeDirection === 'up',
                          'arrow-down' : champ.rankChangeDirection === 'down'}"></div>
          {{champ.rank}}
          (<span class="{{champ.rankChangeDirection}}">{{champ.rankChange}}</span>)
      </td>
      <td colspan="6" scope="row"><img ng-src="{{getImgUrl(champ.name)}}">
      {{champ.name}}</td>
      <td colspan="4" class="relative-container">
          <div ng-class="{'arrow-up' : champ.pointsChangeDirection === 'up',
                          'arrow-down' : champ.pointsChangeDirection === 'down'}"></div>
          {{champ.points === 0 ? 'no data yet' : champ.points}}
          (<span class="{{champ.pointsChangeDirection}}">{{champ.pointsChange}}</span>)
      </td>
    </tr>
  </tbody>
</table>
</div>
</div>

<div layout="row" layout-align="center">
<div flex layout="row" class="layout-container">
<md-progress-linear md-mode="indeterminate" ng-if="loadingTable"></md-progress-linear>
</div>
</div>

<section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
  <md-button class="md-primary"
             ng-click="loadMore()"
             ng-disabled="championCount === champList.length">
    Load More
  </md-button>
</section>
</div>